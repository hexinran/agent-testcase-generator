# D4：中级（5-6步）

## 特征

- **多步推理**：需要从多个文件拼凑信息
- **信息分散**：关键信息分散在 3+ 个文件
- **明显干扰**：3-5 个干扰文件和红鲱鱼
- **答案不可预测**：答案值必须从环境获取

## 参数要求

| 维度 | 要求 |
|------|------|
| Golden Action 步数 | 5-6 步 |
| 环境文件数 | 12-15 个 |
| 信息分散度 | 3+ 个文件 |
| 干扰项数量 | 3-5 个 |

## Query 示例

```
"生产环境支付服务响应慢，用户投诉超时。请根据监控日志和故障单排查配置问题"
```

## 环境示例

```
services/
  payment-service/
    config/application.yaml     # 包含错误配置
    config/application.yaml.bak # 干扰项
  gateway/
    routes.yaml                 # 干扰项（看起来相关）
logs/
  payment.log                   # 显示超时
  gateway.log                   # 红鲱鱼（显示 rate limit）
  database.log                  # 红鲱鱼（显示 slow query）
docs/
  incidents/
    INC-2847.md                 # 故障单，给出推荐配置
    INC-2846.md                 # 干扰项
  architecture.md
monitoring/
  metrics.yaml                  # 性能数据
config/
  production.yaml               # 环境配置
  staging.yaml                  # 干扰项
```

## Golden Action 示例

```json
[
  {"tool": "Read", "input": {"file_path": "logs/payment.log"}},
  {"tool": "Grep", "input": {"pattern": "timeout", "output_mode": "files_with_matches"}},
  {"tool": "Read", "input": {"file_path": "docs/incidents/INC-2847.md"}},
  {"tool": "Read", "input": {"file_path": "monitoring/metrics.yaml"}},
  {"tool": "Read", "input": {"file_path": "services/payment-service/config/application.yaml"}},
  {"tool": "Edit", "input": {"file_path": "services/payment-service/config/application.yaml", ...}}
]
```

## 设计要点

- 信息分散在：logs/ → docs/ → monitoring/ → config/
- 有多个红鲱鱼（gateway 限流、数据库慢查询）
- 正确的超时值从故障单（INC-2847）获取，不可预测
- 需要排除干扰项（.bak 文件、staging 配置）

## 适用场景

- 线上故障排查
- 需要综合分析的问题
