# éªŒè¯æµç¨‹

æœ¬æ–‡æ¡£æŒ‡å¯¼æµ‹è¯•ç”¨ä¾‹çš„éªŒè¯æµç¨‹ï¼ŒåŒ…æ‹¬è‡ªæµ‹å’Œ Haiku éªŒè¯ä¸¤ä¸ªé˜¶æ®µã€‚

---

## é˜¶æ®µ 1ï¼šè‡ªæµ‹éªŒè¯ï¼ˆPhase 4ï¼‰

### ç›®çš„

éªŒè¯ Golden Actionï¼ˆå‚è€ƒè§£ç­”ï¼‰æ˜¯å¦å¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œä»¥åŠæ‰€æœ‰ Grader æ˜¯å¦èƒ½é€šè¿‡ã€‚

**ä¸ Haiku éªŒè¯çš„åŒºåˆ«**ï¼š
- è‡ªæµ‹ï¼šæŒ‰ reference_solution æ‰§è¡Œï¼Œ**ä¸è°ƒç”¨ AI æ¨¡å‹**ï¼Œå¿«é€Ÿï¼ˆå‡ ç§’ï¼‰
- Haikuï¼šHaiku æ¨¡å‹è‡ªå·±æ¢ç´¢æ‰§è¡Œï¼Œæ…¢ï¼ˆå‡ åˆ†é’Ÿï¼‰

### æ‰§è¡Œ

```bash
python3 ~/.claude/skills/agent-testcase-generator/scripts/phase4_verify.py case.json
```

### è§£è¯»ç»“æœ

| æƒ…å†µ | åŸå›  | ä¿®å¤ç­–ç•¥ |
|------|------|---------|
| Golden Action æŸæ­¥å¤±è´¥ | æ–‡ä»¶è·¯å¾„é”™è¯¯ã€å‚æ•°ä¸å®Œæ•´ | æ£€æŸ¥è·¯å¾„ã€ç¡®ä¿ç¯å¢ƒåŒ…å«æ‰€éœ€æ–‡ä»¶ |
| Grader å¤±è´¥ | éªŒè¯æ¡ä»¶è¿‡ä¸¥ã€æœŸæœ›å€¼ä¸åŒ¹é… | æŸ¥çœ‹ `phase4_result.json` è¯¦æƒ…ï¼Œè°ƒæ•´ Grader |
| ç¯å¢ƒç¼ºå¤± | environment ä¸­ç¼ºå°‘æ–‡ä»¶ | æ·»åŠ ç¼ºå¤±æ–‡ä»¶æˆ–ä¿®æ”¹ Golden Action |

### å¯ä¿®æ”¹çš„éƒ¨åˆ†

- âœ… Queryï¼ˆä¿®å¤æ­§ä¹‰ã€è°ƒæ•´æ¨¡ç³Šåº¦ï¼‰
- âœ… Graderï¼ˆè°ƒæ•´éªŒè¯æ¡ä»¶ï¼‰
- âœ… Environment å†…å®¹ï¼ˆä¿®å¤é”™è¯¯ã€è¡¥å……ä¿¡æ¯ï¼‰
- âŒ Environment ç»“æ„ï¼ˆä¸èƒ½å¤§æ”¹ç›®å½•ï¼‰
- âŒ Golden Action æ ¸å¿ƒé€»è¾‘ï¼ˆä¸èƒ½å‡å°‘æ­¥æ•°ï¼‰

**éªŒè¯é€šè¿‡åè¿›å…¥ Phase 6**ã€‚

---

## é˜¶æ®µ 2ï¼šHaiku éªŒè¯ï¼ˆPhase 6ï¼‰

### ç›®çš„

ç”¨è¾ƒå¼±çš„æ¨¡å‹æµ‹è¯•é¢˜ç›®æ˜¯å¦åˆç†ã€‚

**æ ¸å¿ƒåŸåˆ™**ï¼š
- Haiku åªèƒ½çœ‹åˆ° **Query** å’Œ **ç¯å¢ƒæ–‡ä»¶**
- Haiku **ä¸èƒ½çœ‹åˆ°**ç­”æ¡ˆï¼ˆreference_solution å’Œ gradersï¼‰

### æ‰§è¡Œ

```bash
python3 ~/.claude/skills/agent-testcase-generator/scripts/phase6_haiku.py case.json
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»º `haiku_space/` éš”ç¦»ç›®å½•
2. éƒ¨ç½²ç¯å¢ƒæ–‡ä»¶
3. æ‰§è¡Œ `init_commands`ï¼ˆå¯åŠ¨åå°è¿›ç¨‹ç­‰ï¼‰
4. è°ƒç”¨ Haiku CLI
5. éªŒè¯ graders
6. ä¿å­˜ç»“æœåˆ° `phase6_result.json`

### åˆ†æç»“æœ

| æƒ…å†µ | å«ä¹‰ | å¤„ç† |
|------|------|------|
| é€šè¿‡ï¼Œæ­¥æ•°åˆç† | é¢˜ç›®è®¾è®¡åˆç† | ç»§ç»­ |
| é€šè¿‡ï¼Œæ­¥æ•°å¤ªå°‘ | é¢˜ç›®å¤ªç®€å• | å¢åŠ ä¿¡æ¯åˆ†æ•£åº¦ã€æ·»åŠ å¹²æ‰°æ–‡ä»¶ |
| å¤±è´¥ï¼Œèƒ½åŠ›ä¸è¶³ | D5+ é¢˜ç›®å¯æ¥å— | è®°å½•è½¨è¿¹å³å¯ |
| å¤±è´¥ï¼ŒQuery/ç¯å¢ƒé—®é¢˜ | å‡ºé¢˜é—®é¢˜ | ä¿®å¤ Query æ­§ä¹‰ã€è¡¥å……ç¯å¢ƒçº¿ç´¢ |

### æå–è½¨è¿¹æ•°æ®

**ğŸš¨ å¼ºåˆ¶è¦æ±‚**ï¼šä» `phase6_result.json` å¤åˆ¶åˆ°æœ€ç»ˆ `case.json`ï¼š

1. `haiku_evaluation`ï¼ˆæ•´ä¸ªå¯¹è±¡ï¼‰
2. `haiku_trajectory`ï¼ˆä» `haiku_execution.trajectory` å¤åˆ¶ï¼‰

**ä¸¥ç¦**ï¼š
- âŒ ç¼–é€ è½¨è¿¹æ•°æ®
- âŒ æ€»ç»“æˆ–æ”¹å†™ output
- âŒ æ·»åŠ  reasoning å­—æ®µ

---

## KillShell åœºæ™¯ç‰¹åˆ«è¯´æ˜

KillShell åœºæ™¯éœ€è¦ `init_commands` å¯åŠ¨åå°è¿›ç¨‹ï¼š

```json
{
  "init_commands": [
    {
      "command": "nohup bash services/legacy_sync.sh > logs/legacy_sync.log 2>&1 & echo $! > logs/legacy_sync.pid",
      "description": "å¯åŠ¨ legacy_sync åå°è¿›ç¨‹",
      "wait_sec": 2
    }
  ]
}
```

---

## å¸¸è§é—®é¢˜

**Q: init_commands æ²¡æœ‰æ‰§è¡Œï¼Ÿ**
- æ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆcommand, description, wait_secï¼‰

**Q: Haiku çœ‹åˆ°äº† case.jsonï¼Ÿ**
- ä¸å¯èƒ½ã€‚è„šæœ¬å°† Haiku çš„å·¥ä½œç›®å½•è®¾ç½®ä¸º `haiku_space/`ï¼Œè¯¥ç›®å½•ä¸­ä¸åŒ…å« case.json

**Q: Haiku è¶…æ—¶ï¼Ÿ**
- å¢åŠ è¶…æ—¶ï¼š`--timeout 900`

---

## ä¸‹ä¸€æ­¥

éªŒè¯å®Œæˆåï¼Œè¾“å‡ºæœ€ç»ˆç»“æœï¼š
```bash
Read ~/.claude/skills/agent-testcase-generator/reference/output_format.md
```
